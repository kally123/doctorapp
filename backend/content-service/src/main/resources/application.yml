# Server Configuration
server:
  port: ${SERVER_PORT:8092}
spring:
  # Explicitly disable SQL-related auto-configurations
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration
      - org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration
      - org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration
      - org.springframework.boot.autoconfigure.r2dbc.R2dbcAutoConfiguration
      - org.springframework.boot.autoconfigure.data.r2dbc.R2dbcDataAutoConfiguration
      - org.springframework.boot.autoconfigure.r2dbc.R2dbcTransactionManagerAutoConfiguration
  application:
    name: content-service

  # MongoDB Configuration
  data:
    mongodb:
      uri: mongodb://${MONGO_USERNAME:admin}:${MONGO_PASSWORD:mongo_password}@${MONGO_HOST:localhost}:${MONGO_PORT:27017}/${MONGO_DATABASE:healthapp_content}
      auto-index-creation: true

    # Redis Configuration
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:}
      timeout: 5000ms

    # Elasticsearch Configuration
    elasticsearch:
      uris: ${ELASTICSEARCH_HOSTS:http://localhost:9200}

  # Kafka Configuration
  kafka:
    enabled: ${KAFKA_ENABLED:true}
    bootstrap-servers: ${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
    producer:
      client-id: content-service-producer
      acks: all
      retries: 3
    consumer:
      group-id: content-service-group
      auto-offset-reset: earliest

# JWT Configuration
jwt:
  secret: ${JWT_SECRET:your-256-bit-secret-key-for-jwt-signing-must-be-at-least-32-chars}

# AWS S3 Configuration
aws:
  s3:
    region: ${AWS_REGION:us-east-1}
    bucket: ${AWS_S3_BUCKET:healthapp-content}
    access-key: ${AWS_ACCESS_KEY:}
    secret-key: ${AWS_SECRET_KEY:}
    endpoint: ${AWS_S3_ENDPOINT:}

# CDN Configuration
cdn:
  base-url: ${CDN_BASE_URL:https://cdn.healthapp.com}

# Content Configuration
content:
  cache:
    article-ttl: 1h
    category-ttl: 24h
  search:
    max-results: 100

# Management Endpoints
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: when_authorized
  metrics:
    tags:
      application: ${spring.application.name}

# OpenAPI Configuration
springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
    enabled: true

# Logging
logging:
  level:
    com.healthapp.content: DEBUG
    org.springframework.data.mongodb: INFO
    org.elasticsearch: INFO
